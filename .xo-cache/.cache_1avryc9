{"/app/helpers.js":{"size":198,"mtime":1501097843038,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/helpers.js","messages":[],"errorCount":0,"warningCount":0}},"/app/db-helpers.js":{"size":906,"mtime":1501101582839,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/db-helpers.js","messages":[],"errorCount":0,"warningCount":0,"output":"const db = require('./db')\n\nconst shortUrl = process.env.SHORT_URL\n\nconst getNextId = () => {\n   return new Promise((resolve, reject) => {\n      db.get('_id', (err, val) => {\n         if (err) {\n            reject(err)\n         }\n         if (val === undefined) {\n            db.put('_id', '0')\n            resolve('0')\n         } else {\n            console.log(val)\n            resolve(val)\n         }\n      })\n   })\n}\n\nconst getUrl = id => {\n   return new Promise((resolve, reject) => {\n      db.get(id, (err, val) => err ? reject(err) : resolve(val))\n   })\n}\n\nconst connect = (url, res) => {\n   getNextId()\n     .then(id => {\n        res.status(200).send(JSON.stringify({normal: url, shortUrl: shortUrl + id}))\n        db.put(id, url)\n        return id\n     })\n   .then(id => {\n      id = parseInt(id, 10)\n      id++\n      db.put('_id', id)\n      return id\n   }).then(() => res.end())\n}\n\nmodule.exports = {\n   connect,\n   getUrl\n}\n"}},"/app/db.js":{"size":177,"mtime":1501097843034,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/db.js","messages":[],"errorCount":0,"warningCount":0,"output":"const path = require('path')\nconst level = require('level')\n\nconst dbPath = process.env.DB_PATH || path.join(__dirname, 'mydb')\n\nconst db = level(dbPath)\n\nmodule.exports = db\n"}}}