{"/app/helpers.js":{"size":198,"mtime":1501102378477,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/helpers.js","messages":[],"errorCount":0,"warningCount":0}},"/app/db-helpers.js":{"size":966,"mtime":1501102378465,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/db-helpers.js","messages":[],"errorCount":0,"warningCount":0,"output":"const db = require('./db')\n\nconst shortUrl = process.env.SHORT_URL\n\nconst getNextId = () => {\n   return new Promise((resolve, reject) => {\n      db.get('_id', (err, val) => {\n         if (val === undefined) {\n            db.put('_id', '0')\n            resolve('0')\n         } else if (err) {\n            reject(err)\n         } else {\n            console.log(val)\n            resolve(val)\n         }\n      })\n   })\n}\n\nconst getUrl = id => {\n   return new Promise((resolve, reject) => {\n      db.get(id, (err, val) => err ? reject(err) : resolve(val))\n   })\n}\n\nconst connect = (url, res) => {\n   getNextId()\n     .then(id => {\n        res.status(200).send(JSON.stringify({normal: url, shortUrl: shortUrl + id}))\n        db.put(id, url)\n        return id\n     })\n   .then(id => {\n      id = parseInt(id, 10)\n      id++\n      db.put('_id', id)\n      return id\n   }).then(() => res.end())\n   .catch(err => console.log(err))\n}\n\nmodule.exports = {\n   connect,\n   getUrl\n}\n"}},"/app/db.js":{"size":175,"mtime":1501102378469,"hashOfConfig":"1gw0m5u","results":{"filePath":"/app/db.js","messages":[],"errorCount":0,"warningCount":0}}}